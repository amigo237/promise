var Promise=function(){var e=function(){return new function(){var e=null,t=[],n=[],r=function(r){for(n=r||n;t.length;)t.shift()[!1===e?1:0].apply(this,n)},i=function(){};this.then=function(n,s){t.push([n||i,s||i]);null!==e&&r();return this};this.always=function(e){return this.then(e,e)};this.done=function(e){return this.then(e)};this.fail=function(e){return this.then(null,e)};this.isResolved=function(){return!0===e};this.isRejected=function(){return!1===e};this.isPending=function(){return null===e};this.resolve=function(){e=!0;r(arguments);return this};this.reject=function(){e=!1;r(arguments);return this}}};e.when=function(t){for(var n=e(),r=0,i=!1,s=0,o=t.length;s<o;s++)t[s].then(function(){t.length===++r&&n.resolve()},function(){i=i||n.reject.apply(n,arguments)||!0});return 0===t.length?n.resolve():n};return e}()
